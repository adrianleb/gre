_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[10],{"/2Hx":function(e,t,r){"use strict";r.r(t),r.d(t,"__N_SSG",(function(){return x})),r.d(t,"Capture",(function(){return O})),r.d(t,"Previewing",(function(){return v})),r.d(t,"default",(function(){return A}));r("o0o1");var n=r("nKUr"),a=r("ODXe");var c=r("g4pe"),i=r.n(c),o=r("YFqc"),s=r.n(o),f=(r("20a2"),r("7ZeU")),l=r("q1tI"),u=r("e0Q9"),b=r("rr/c"),d=r("rL8q"),h=(r("GL4Q"),r("ieaa"),r("OHjB"),r("W9HR"),r("tXdy"),r("rQ2n")),w=r("ZzT5"),y=r("hmBY"),j=r("MX0m"),p=r.n(j);function g(e){var t=e.Day;return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsxs)("p",{className:"jsx-1224002593 description",children:[Object(n.jsx)(s.a,{href:"/".concat(t.n),children:Object(n.jsxs)("a",{className:"jsx-1224002593",children:["Day ",t.n,"."]})})," ",Object(n.jsxs)("span",{className:"jsx-1224002593 daily",children:['"',t.title,'"']})," by"," ",Object(n.jsx)("a",{href:"https://twitter.com/greweb",target:"_blank",className:"jsx-1224002593",children:"@greweb"})]}),Object(n.jsxs)("nav",{className:"jsx-1224002593",children:[Object(d.a)(t.n-1)?Object(n.jsx)(s.a,{href:"/export/".concat(t.n-1),children:Object(n.jsx)("a",{className:"jsx-1224002593",children:"\u2190 previous day"})}):Object(n.jsx)("span",{className:"jsx-1224002593"}),Object(d.a)(t.n+1)?Object(n.jsx)(s.a,{href:"/export/".concat(t.n+1),children:Object(n.jsx)("a",{className:"jsx-1224002593",children:"next day \u2192"})}):null]}),Object(n.jsx)(p.a,{id:"1224002593",children:[".description.jsx-1224002593{text-align:center;line-height:1.3rem;font-size:1.3rem;font-weight:300;}",".description.jsx-1224002593 .daily.jsx-1224002593{font-weight:600;}","nav.jsx-1224002593{width:400px;font-size:0.6em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}"]})]})}var m=r("b0oO");var x=!0;function O(e){var t=e.format,r=e.n,c=e.Day,i=e.onFinished,o=e.size,s=e.start,d=e.end,h=e.framePerSecond,w=e.speed,y=Object(l.useRef)(),j=Math.floor((d-s)*h/w),p=Object(l.useState)(0),g=p[0],m=p[1],x=Object(l.useState)(!1),O=(x[0],x[1]),v=s+g/j*(d-s),A=Object(l.useState)((function(){var e,r,n,o,s,l=0,u=!1;return{onDraw:function(){if(u)if("gif"===t){var b=function(){for(var e=y.current.capture(),t=Object(a.a)(e.shape,2),r=t[0],n=t[1],c=new Uint8Array(r*n*4),i=0;i<r;i++)for(var o=0;o<n;o++)for(var s=0;s<4;s++)c[4*(n*i+o)+s]=e.data[4*(n*(r-i-1)+o)+s];return{width:n,height:r,data:c}}(),d=b.width,w=b.height,p=b.data;n||(n=Object(f.GIFEncoder)()),e=Object(f.quantize)(p,256),r=Object(f.applyPalette)(p,e),n.writeFrame(r,d,w,{palette:e,delay:1e3/h}),l>=j?(n.finish(),i(new Blob([n.bytes()],{type:"image/gif"}))):m(++l)}else{o||(o=new Worker("/ffmpeg-worker-mp4.js"),s=[]);var g=function(e){for(var t=e.replace(/^data[^,]+,/,""),r=window.atob(t),n=r.length,a=new Uint8Array(new ArrayBuffer(n)),c=0;c<n;c++)a[c]=r.charCodeAt(c);return a}(y.current.captureAsDataURL("image/jpeg",1));if(s.push({name:"img"+l.toString().padStart(4,0)+".jpeg",data:g}),l>=j){Date.now();o.onmessage=function(e){var t=e.data;switch(t.type){case"stdout":case"stderr":console.log(t.data);break;case"exit":console.log("Process exited with code "+t.data);break;case"done":console.log("reached done");var r=new Blob([t.data.MEMFS[0].data],{type:"video/mp4"});i(r)}},o.postMessage({type:"run",TOTAL_MEMORY:268435456,arguments:["-r",String(h),"-i","img%04d.jpeg","-c:v","libx264","-crf","1","-pix_fmt","yuv420p","-vb",c.exportMP4vb||"5M","out.mp4"],MEMFS:s})}else m(++l)}},onLoad:function(){u=!0,O(!0)}}}))[0];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(u.Surface,{webglContextAttributes:{preserveDrawingBuffer:!0},onLoad:A.onLoad,ref:y,width:o,height:o,pixelRatio:1,children:Object(n.jsx)(b.NearestCopy,{onDraw:A.onDraw,children:Object(n.jsx)(c.Shader,{exporting:!0,time:v,n:r})})}),g+" / "+j]})}function v(e){var t=e.n,r=e.Day,a=e.start,c=e.end,i=e.framePerSecond,o=e.speed,s=Object(l.useState)(0),f=s[0],b=s[1];Object(l.useEffect)((function(){var e,t,r;return r=requestAnimationFrame((function n(a){r=requestAnimationFrame(n),e||(t=e=a),a-t>=1e3/i&&(t=a,b((a-e)/1e3))})),function(){return cancelAnimationFrame(r)}}),[]);var d=a+o*f%(c-a);return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(u.Surface,{width:400,height:400,children:Object(n.jsx)(r.Shader,{exporting:!0,time:d,n:t})}),d.toFixed(3)]})}function A(e){var t=e.day,r=Object(l.useState)(0),a=r[0],c=r[1],o=Object(l.useState)(),s=o[0],f=o[1],u=Object(d.a)(parseInt(t,10));if(!u)return null;var b=u.exportStart||0,j=u.exportEnd||1,p=u.exportFramePerSecond||24,x=u.exportSpeed||1,A=u.exportSize||800;return Object(n.jsx)(w.a,{children:Object(n.jsxs)(h.a,{children:[Object(n.jsxs)(i.a,{children:[Object(n.jsxs)("title",{children:["One Day One Shader \u2013 Day ",u.n,'. "',u.title,'"']}),Object(n.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),Object(n.jsxs)(y.a,{children:[Object(n.jsx)(m.a,{children:"Export tools"}),Object(n.jsx)(g,{Day:u}),s?Object(n.jsx)(O,{format:s,n:a,start:b,end:j,framePerSecond:p,speed:x,size:A,Day:u,onFinished:function(e){!function(e,t){var r=URL.createObjectURL(e),n=document.createElement("a");n.href=r,n.download=t,n.click()}(e,"shaderday_"+t+"_"+a+"."+s),f(null)}}):Object(n.jsx)(v,{n:a,start:b,end:j,framePerSecond:p,speed:x,Day:u}),Object(n.jsx)("input",{style:{margin:10},value:a,range:1,onChange:function(e){return c(parseInt(e.target.value,10))},type:"number"}),Object(n.jsx)("button",{onClick:function(){return f("gif")},children:"gif"}),Object(n.jsx)("button",{onClick:function(){return f("mp4")},children:"mp4"})]})]})})}},"20a2":function(e,t,r){e.exports=r("nOHt")},"7ZeU":function(e,t){var r=Object.defineProperty;r(t,"__esModule",{value:!0}),((e,t)=>{for(var n in t)r(e,n,{get:t[n],enumerable:!0})})(t,{GIFEncoder:()=>S,applyPalette:()=>p,default:()=>E,nearestColor:()=>B,nearestColorIndex:()=>v,nearestColorIndexWithDistance:()=>A,prequantize:()=>j,quantize:()=>d,snapColorsToPalette:()=>x});var n=59;function a(e=256){let t=0,r=new Uint8Array(e);return{get buffer(){return r.buffer},reset(){t=0},bytesView:()=>r.subarray(0,t),bytes:()=>r.slice(0,t),writeByte(e){n(t+1),r[t]=e,t++},writeBytes(e,a=0,c=e.length){n(t+c);for(let n=0;n<c;n++)r[t++]=e[n+a]},writeBytesView(e,a=0,c=e.byteLength){n(t+c),r.set(e.subarray(a,a+c),t),t+=c}};function n(e){var n=r.length;if(n>=e)return;e=Math.max(e,n*(n<1048576?2:1.125)>>>0),0!=n&&(e=Math.max(e,256));const a=r;r=new Uint8Array(e),t>0&&r.set(a.subarray(0,t),0)}}var c=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];var i=function(e,t,r,n,i=a(512),o=new Uint8Array(256),s=new Int32Array(5003),f=new Int32Array(5003)){const l=s.length,u=Math.max(2,n);o.fill(0),f.fill(0),s.fill(-1);let b=0,d=0;const h=u+1,w=h;let y=!1,j=w,p=(1<<j)-1;const g=1<<h-1,m=g+1;let x=g+2,O=0,v=r[0],A=0;for(let a=l;a<65536;a*=2)++A;A=8-A,i.writeByte(u),S(g);const B=r.length;for(let a=1;a<B;a++)e:{const e=r[a],t=(e<<12)+v;let n=e<<A^v;if(s[n]===t){v=f[n];break e}const c=0===n?1:l-n;for(;s[n]>=0;)if(n-=c,n<0&&(n+=l),s[n]===t){v=f[n];break e}S(v),v=e,x<4096?(f[n]=x++,s[n]=t):(s.fill(-1),x=g+2,y=!0,S(g))}return S(v),S(m),i.writeByte(0),i.bytesView();function S(e){for(b&=c[d],d>0?b|=e<<d:b=e,d+=j;d>=8;)o[O++]=255&b,O>=254&&(i.writeByte(O),i.writeBytesView(o,0,O),O=0),b>>=8,d-=8;if((x>p||y)&&(y?(j=w,p=(1<<j)-1,y=!1):(++j,p=12===j?1<<j:(1<<j)-1)),e==m){for(;d>0;)o[O++]=255&b,O>=254&&(i.writeByte(O),i.writeBytesView(o,0,O),O=0),b>>=8,d-=8;O>0&&(i.writeByte(O),i.writeBytesView(o,0,O),O=0)}}};function o(e,t,r){return e<<8&63488|t<<2&992|r>>3}function s(e,t,r,n){return e>>4|240&t|(240&r)<<4|(240&n)<<8}function f(e,t,r){return e>>4<<8|240&t|r>>4}function l(e,t,r){return e<t?t:e>r?r:e}function u(e){return e*e}function b(e,t,r){var n=0,a=1e100;const c=e[t],i=c.cnt,o=c.ac,s=c.rc,f=c.gc,l=c.bc;for(var b=c.fw;0!=b;b=e[b].fw){const t=e[b],c=t.cnt,h=i*c/(i+c);if(!(h>=a)){var d=0;r&&(d+=h*u(t.ac-o))>=a||(d+=h*u(t.rc-s))>=a||(d+=h*u(t.gc-f))>=a||(d+=h*u(t.bc-l))>=a||(a=d,n=b)}}c.err=a,c.nn=n}function d(e,t,r={}){const{format:n="rgb565",clearAlpha:a=!0,clearAlphaColor:c=0,clearAlphaThreshold:i=0,oneBitAlpha:d=!1}=r;if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array)&&!(e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");const w=new Uint32Array(e.buffer);let y=!1!==r.useSqrt;const j="rgba4444"===n,p=function(e,t){const r=new Array("rgb444"===t?4096:65536),n=e.length;if("rgba4444"===t)for(let a=0;a<n;++a){const t=e[a],n=t>>24&255,c=t>>16&255,i=t>>8&255,o=255&t,f=s(o,i,c,n);let l=f in r?r[f]:r[f]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};l.rc+=o,l.gc+=i,l.bc+=c,l.ac+=n,l.cnt++}else if("rgb444"===t)for(let a=0;a<n;++a){const t=e[a],n=t>>16&255,c=t>>8&255,i=255&t,o=f(i,c,n);let s=o in r?r[o]:r[o]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};s.rc+=i,s.gc+=c,s.bc+=n,s.cnt++}else for(let a=0;a<n;++a){const t=e[a],n=t>>16&255,c=t>>8&255,i=255&t,s=o(i,c,n);let f=s in r?r[s]:r[s]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};f.rc+=i,f.gc+=c,f.bc+=n,f.cnt++}return r}(w,n),g=p.length,m=g-1,x=new Uint32Array(g+1);for(var O=0,v=0;v<g;++v){const e=p[v];if(null!=e){var A=1/e.cnt;j&&(e.ac*=A),e.rc*=A,e.gc*=A,e.bc*=A,p[O++]=e}}u(t)/O<.022&&(y=!1);var B,S,k;for(v=0;v<O-1;++v)p[v].fw=v+1,p[v+1].bk=v,y&&(p[v].cnt=Math.sqrt(p[v].cnt));for(y&&(p[v].cnt=Math.sqrt(p[v].cnt)),v=0;v<O;++v){b(p,v,!1);var M=p[v].err;for(S=++x[0];S>1&&!(p[B=x[k=S>>1]].err<=M);S=k)x[S]=B;x[S]=v}var P=O-t;for(v=0;v<P;){for(var D;;){var E=x[1];if((D=p[E]).tm>=D.mtm&&p[D.nn].mtm<=D.tm)break;D.mtm==m?E=x[1]=x[x[0]--]:(b(p,E,!1),D.tm=v);M=p[E].err;for(S=1;(k=S+S)<=x[0]&&(k<x[0]&&p[x[k]].err>p[x[k+1]].err&&k++,!(M<=p[B=x[k]].err));S=k)x[S]=B;x[S]=E}var U=p[D.nn],F=D.cnt,_=U.cnt;A=1/(F+_);j&&(D.ac=A*(F*D.ac+_*U.ac)),D.rc=A*(F*D.rc+_*U.rc),D.gc=A*(F*D.gc+_*U.gc),D.bc=A*(F*D.bc+_*U.bc),D.cnt+=U.cnt,D.mtm=++v,p[U.bk].fw=U.fw,p[U.fw].bk=U.bk,U.mtm=m}let q=[];var C=0;for(v=0;;++C){let e=l(Math.round(p[v].rc),0,255),t=l(Math.round(p[v].gc),0,255),r=l(Math.round(p[v].bc),0,255),n=255;if(j){if(n=l(Math.round(p[v].ac),0,255),d){n=n<=("number"===typeof d?d:127)?0:255}a&&n<=i&&(e=t=r=c,n=0)}const o=j?[e,t,r,n]:[e,t,r];if(h(q,o)||q.push(o),0==(v=p[v].fw))break}return q}function h(e,t){for(let r=0;r<e.length;r++){const n=e[r];let a=n[0]===t[0]&&n[1]===t[1]&&n[2]===t[2],c=!(n.length>=4&&t.length>=4)||n[3]===t[3];if(a&&c)return!0}return!1}function w(e,t){var r,n=0;for(r=0;r<e.length;r++){const a=e[r]-t[r];n+=a*a}return n}function y(e,t){return t>1?Math.round(e/t)*t:e}function j(e,{roundRGB:t=5,roundAlpha:r=10,oneBitAlpha:n=null}={}){const a=new Uint32Array(e.buffer);for(let c=0;c<a.length;c++){const e=a[c];let i=e>>24&255,o=e>>16&255,s=e>>8&255,f=255&e;if(i=y(i,r),n){i=i<=("number"===typeof n?n:127)?0:255}f=y(f,t),s=y(s,t),o=y(o,t),a[c]=i<<24|o<<16|s<<8|f<<0}}function p(e,t,r="rgb565"){if(!e||!e.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(e instanceof Uint8Array)&&!(e instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(t.length>256)throw new Error("applyPalette() only works with 256 colors or less");const n=new Uint32Array(e.buffer),a=n.length,c="rgb444"===r?4096:65536,i=new Uint8Array(a),l=new Array(c);if("rgba4444"===r)for(let o=0;o<a;o++){const e=n[o],r=e>>24&255,a=e>>16&255,c=e>>8&255,f=255&e,u=s(f,c,a,r),b=u in l?l[u]:l[u]=g(f,c,a,r,t);i[o]=b}else{const e="rgb444"===r?f:o;for(let r=0;r<a;r++){const a=n[r],c=a>>16&255,o=a>>8&255,s=255&a,f=e(s,o,c),u=f in l?l[f]:l[f]=m(s,o,c,t);i[r]=u}}return i}function g(e,t,r,n,a){let c=0,i=1e100;for(let o=0;o<a.length;o++){const s=a[o];let f=O(s[3]-n);if(f>i)continue;if(f+=O(s[0]-e),f>i)continue;if(f+=O(s[1]-t),f>i)continue;f+=O(s[2]-r),f>i||(i=f,c=o)}return c}function m(e,t,r,n){let a=0,c=1e100;for(let i=0;i<n.length;i++){const o=n[i];let s=O(o[0]-e);if(s>c)continue;if(s+=O(o[1]-t),s>c)continue;s+=O(o[2]-r),s>c||(c=s,a=i)}return a}function x(e,t,r=5){if(!e.length||!t.length)return;const n=e.map((e=>e.slice(0,3))),a=r*r,c=e[0].length;for(let i=0;i<t.length;i++){let r=t[i];r=r.length<c?[r[0],r[1],r[2],255]:r.length>c?r.slice(0,3):r.slice();const o=A(n,r.slice(0,3),w),s=o[0],f=o[1];f>0&&f<=a&&(e[s]=r)}}function O(e){return e*e}function v(e,t,r=w){let n=1/0,a=-1;for(let c=0;c<e.length;c++){const i=r(t,e[c]);i<n&&(n=i,a=c)}return a}function A(e,t,r=w){let n=1/0,a=-1;for(let c=0;c<e.length;c++){const i=r(t,e[c]);i<n&&(n=i,a=c)}return[a,n]}function B(e,t,r=w){return e[v(e,t,r)]}function S(e={}){const{initialCapacity:t=4096,auto:r=!0}=e,c=a(t),o=new Uint8Array(256),s=new Int32Array(5003),f=new Int32Array(5003);let l=!1;return{reset(){c.reset(),l=!1},finish(){c.writeByte(n)},bytes:()=>c.bytes(),bytesView:()=>c.bytesView(),get buffer(){return c.buffer},get stream(){return c},writeHeader:u,writeFrame(e,t,n,a={}){const{transparent:b=!1,transparentIndex:d=0,delay:h=0,palette:w=null,repeat:y=0,colorDepth:j=8,dispose:p=-1}=a;let g=!1;if(r?l||(g=!0,u(),l=!0):g=Boolean(a.first),t=Math.max(0,Math.floor(t)),n=Math.max(0,Math.floor(n)),g){if(!w)throw new Error("First frame must include a { palette } option");!function(e,t,r,n,a=8){const c=1,i=0,o=D(n.length)-1,s=c<<7|a-1<<4|i<<3|o,f=0,l=0;M(e,t),M(e,r),e.writeBytes([s,f,l])}(c,t,n,w,j),k(c,w),y>=0&&function(e,t){e.writeByte(33),e.writeByte(255),e.writeByte(11),P(e,"NETSCAPE2.0"),e.writeByte(3),e.writeByte(1),M(e,t),e.writeByte(0)}(c,y)}const m=Math.round(h/10);!function(e,t,r,n,a){e.writeByte(33),e.writeByte(249),e.writeByte(4),a<0&&(a=0,n=!1);var c,i;n?(c=1,i=2):(c=0,i=0);t>=0&&(i=7&t);i<<=2;const o=0;e.writeByte(0|i|o|c),M(e,r),e.writeByte(a||0),e.writeByte(0)}(c,p,m,b,d);const x=Boolean(w)&&!g;!function(e,t,r,n){if(e.writeByte(44),M(e,0),M(e,0),M(e,t),M(e,r),n){const t=0,r=0,a=D(n.length)-1;e.writeByte(128|t|r|0|a)}else e.writeByte(0)}(c,t,n,x?w:null),x&&k(c,w),function(e,t,r,n,a=8,c,o,s){i(r,n,t,a,e,c,o,s)}(c,e,t,n,j,o,s,f)}};function u(){P(c,"GIF89a")}}function k(e,t){const r=1<<D(t.length);for(let n=0;n<r;n++){let r=[0,0,0];n<t.length&&(r=t[n]),e.writeByte(r[0]),e.writeByte(r[1]),e.writeByte(r[2])}}function M(e,t){e.writeByte(255&t),e.writeByte(t>>8&255)}function P(e,t){for(var r=0;r<t.length;r++)e.writeByte(t.charCodeAt(r))}function D(e){return Math.max(Math.ceil(Math.log2(e)),1)}var E=S},Apn4:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/export/[day]",function(){return r("/2Hx")}])},GL4Q:function(e,t,r){"use strict";r.d(t,"a",(function(){return l}));var n=r("nKUr"),a=r("rePB");function c(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},c=Object.keys(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)r=c[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var i=r("q1tI"),o=r("e0Q9");function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var f=function(e){var t=e.Day,r=c(e,["Day"]),o=Object(i.useState)(0),f=o[0],l=o[1];return Object(i.useEffect)((function(){var e,t;return t=requestAnimationFrame((function r(n){t=requestAnimationFrame(r),e||(e=n),l((n-e)/1e3)})),function(){return cancelAnimationFrame(t)}}),[]),Object(n.jsx)(t.Shader,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){Object(a.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({time:f},r))};function l(e){var t=e.Day,r=Object(i.useState)(0),a=r[0];r[1];return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(o.Surface,{width:400,height:400,children:Object(n.jsx)(f,{Day:t,n:a},t.n)}),null]})}}},[["Apn4",0,1,2,3]]]);