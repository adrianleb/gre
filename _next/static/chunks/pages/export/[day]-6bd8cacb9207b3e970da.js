_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[10],{"/2Hx":function(t,e,n){"use strict";n.r(e),n.d(e,"__N_SSG",(function(){return v})),n.d(e,"Capture",(function(){return O})),n.d(e,"Previewing",(function(){return A})),n.d(e,"default",(function(){return B}));n("o0o1");var r=n("nKUr");function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function c(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var n=[],r=!0,i=!1,c=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(f){i=!0,c=f}finally{try{r||null==o.return||o.return()}finally{if(i)throw c}}return n}}(t,e)||function(t,e){if(t){if("string"===typeof t)return i(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var a=n("g4pe"),o=n.n(a),f=n("YFqc"),s=n.n(f),l=(n("20a2"),n("7ZeU")),u=n("q1tI"),h=n("e0Q9"),b=n("rr/c"),d=n("rL8q"),y=(n("GL4Q"),n("ieaa"),n("OHjB"),n("W9HR"),n("tXdy"),n("rQ2n")),w=n("ZzT5"),j=n("hmBY"),m=n("MX0m"),g=n.n(m);function p(t){var e=t.Day;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)("p",{className:"jsx-1224002593 description",children:[Object(r.jsx)(s.a,{href:"/".concat(e.n),children:Object(r.jsxs)("a",{className:"jsx-1224002593",children:["Day ",e.n,"."]})})," ",Object(r.jsxs)("span",{className:"jsx-1224002593 daily",children:['"',e.title,'"']})," by"," ",Object(r.jsx)("a",{href:"https://twitter.com/greweb",target:"_blank",className:"jsx-1224002593",children:"@greweb"})]}),Object(r.jsxs)("nav",{className:"jsx-1224002593",children:[Object(d.a)(e.n-1)?Object(r.jsx)(s.a,{href:"/export/".concat(e.n-1),children:Object(r.jsx)("a",{className:"jsx-1224002593",children:"\u2190 previous day"})}):Object(r.jsx)("span",{className:"jsx-1224002593"}),Object(d.a)(e.n+1)?Object(r.jsx)(s.a,{href:"/export/".concat(e.n+1),children:Object(r.jsx)("a",{className:"jsx-1224002593",children:"next day \u2192"})}):null]}),Object(r.jsx)(g.a,{id:"1224002593",children:[".description.jsx-1224002593{text-align:center;line-height:1.3rem;font-size:1.3rem;font-weight:300;}",".description.jsx-1224002593 .daily.jsx-1224002593{font-weight:600;}","nav.jsx-1224002593{width:400px;font-size:0.6em;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:row;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}"]})]})}var x=n("b0oO");var v=!0;function O(t){var e=t.Day,n=t.onFinished,i=t.size,a=t.start,o=t.end,f=t.framePerSecond,s=t.speed,d=Object(u.useRef)(),y=Math.floor((o-a)*f/s),w=Object(u.useState)(0),j=w[0],m=w[1],g=Object(u.useState)(!1),p=(g[0],g[1]),x=a+j/y*(o-a),v=Object(u.useState)((function(){var t,e,r,i=0,a=!1;return{onDraw:function(){if(a){var o=function(){for(var t=d.current.capture(),e=c(t.shape,2),n=e[0],r=e[1],i=new Uint8Array(n*r*4),a=0;a<n;a++)for(var o=0;o<r;o++)for(var f=0;f<4;f++)i[4*(r*a+o)+f]=t.data[4*(r*(n-a-1)+o)+f];return{width:r,height:n,data:i}}(),s=o.width,u=o.height,h=o.data;r||(r=Object(l.GIFEncoder)()),t=Object(l.quantize)(h,256),e=Object(l.applyPalette)(h,t),r.writeFrame(e,s,u,{palette:t,delay:1e3/f}),i>=y?(r.finish(),n(r.bytes())):m(++i)}},onLoad:function(){a=!0,p(!0)}}}))[0];return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(h.Surface,{onLoad:v.onLoad,ref:d,width:i,height:i,pixelRatio:1,children:Object(r.jsx)(b.NearestCopy,{onDraw:v.onDraw,children:Object(r.jsx)(e.Shader,{time:x})})}),j+" / "+y]})}function A(t){var e=t.Day,n=t.start,i=t.end,c=t.framePerSecond,a=t.speed,o=Object(u.useState)(0),f=o[0],s=o[1];Object(u.useEffect)((function(){var t,e,n;return n=requestAnimationFrame((function r(i){n=requestAnimationFrame(r),t||(e=t=i),i-e>=1e3/c&&(e=i,s((i-t)/1e3))})),function(){return cancelAnimationFrame(n)}}),[]);var l=n+a*f%(i-n);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(h.Surface,{width:400,height:400,children:Object(r.jsx)(e.Shader,{time:l})}),l.toFixed(3)]})}function B(t){var e=t.day,n=Object(u.useState)(),i=n[0],c=n[1],a=Object(d.a)(parseInt(e,10));if(!a)return null;var f=a.gifStart||0,s=a.gifEnd||1,l=a.gifFramePerSecond||24,h=a.gifSpeed||1,b=a.gifSize||800;return Object(r.jsx)(w.a,{children:Object(r.jsxs)(y.a,{children:[Object(r.jsxs)(o.a,{children:[Object(r.jsxs)("title",{children:["One Day One Shader \u2013 Day ",a.n,'. "',a.title,'"']}),Object(r.jsx)("link",{rel:"icon",href:"/favicon.ico"})]}),Object(r.jsxs)(j.a,{children:[Object(r.jsx)(x.a,{children:"Export tools"}),Object(r.jsx)(p,{Day:a}),i?Object(r.jsx)(O,{start:f,end:s,framePerSecond:l,speed:h,size:b,Day:a,onFinished:function(t){c(!1),function(t,e,n){var r=t instanceof Blob?t:new Blob([t],{type:n}),i=URL.createObjectURL(r),c=document.createElement("a");c.href=i,c.download=e,c.click()}(t,"shaderday_"+e+".gif","image/gif")}}):Object(r.jsx)(A,{start:f,end:s,framePerSecond:l,speed:h,Day:a}),Object(r.jsx)("button",{onClick:function(){return c(!0)},children:"generate"})]})]})})}},"20a2":function(t,e,n){t.exports=n("nOHt")},"7ZeU":function(t,e){var n=Object.defineProperty;n(e,"__esModule",{value:!0}),((t,e)=>{for(var r in e)n(t,r,{get:e[r],enumerable:!0})})(e,{GIFEncoder:()=>S,applyPalette:()=>m,default:()=>F,nearestColor:()=>B,nearestColorIndex:()=>O,nearestColorIndexWithDistance:()=>A,prequantize:()=>j,quantize:()=>b,snapColorsToPalette:()=>x});var r=59;function i(t=256){let e=0,n=new Uint8Array(t);return{get buffer(){return n.buffer},reset(){e=0},bytesView:()=>n.subarray(0,e),bytes:()=>n.slice(0,e),writeByte(t){r(e+1),n[e]=t,e++},writeBytes(t,i=0,c=t.length){r(e+c);for(let r=0;r<c;r++)n[e++]=t[r+i]},writeBytesView(t,i=0,c=t.byteLength){r(e+c),n.set(t.subarray(i,i+c),e),e+=c}};function r(t){var r=n.length;if(r>=t)return;t=Math.max(t,r*(r<1048576?2:1.125)>>>0),0!=r&&(t=Math.max(t,256));const i=n;n=new Uint8Array(t),e>0&&n.set(i.subarray(0,e),0)}}var c=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535];var a=function(t,e,n,r,a,o,f,s){a=a||i(512),o=o||new Uint8Array(256),f=f||new Int32Array(5003),s=s||new Int32Array(5003);const l=f.length,u=Math.max(2,r);o.fill(0),s.fill(0),S();let h=0,b=0;const d=u+1,y=d;let w=!1,j=y,m=M(j);const g=1<<d-1,p=g+1;let x=g+2,v=0,O=n[0],A=0;for(let i=l;i<65536;i*=2)++A;A=8-A,a.writeByte(u),E(g);for(let i=1;i<n.length;i++)U(n[i]);return E(O),E(p),a.writeByte(0),a.bytesView();function B(t){o[v++]=t,v>=254&&k()}function S(){f.fill(-1)}function U(t){const e=(t<<12)+O;let n=t<<A^O;if(f[n]===e)O=s[n];else{if(f[n]>=0){const t=0===n?1:l-n;do{if(n-=t,n<0&&(n+=l),f[n]===e)return void(O=s[n])}while(f[n]>=0)}E(O),O=t,x<4096?(s[n]=x++,f[n]=e):(S(),x=g+2,w=!0,E(g))}}function k(){v>0&&(a.writeByte(v),a.writeBytesView(o,0,v),v=0)}function M(t){return(1<<t)-1}function E(t){for(h&=c[b],b>0?h|=t<<b:h=t,b+=j;b>=8;)B(255&h),h>>=8,b-=8;if((x>m||w)&&(w?(j=y,m=M(j),w=!1):(++j,m=12==j?4096:M(j))),t==p){for(;b>0;)B(255&h),h>>=8,b-=8;k()}}};function o(t,e,n){return t<<8&63488|e<<2&992|n>>3}function f(t,e,n,r){return t>>4|240&e|(240&n)<<4|(240&r)<<8}function s(t,e,n){return t>>4<<8|240&e|n>>4}function l(t,e,n){return t<e?e:t>n?n:t}function u(t){return t*t}function h(t,e,n){for(var r=0,i=1e100,c=t[e],a=c.cnt,o=c.ac,f=c.rc,s=c.gc,l=c.bc,h=c.fw;0!=h;h=t[h].fw){var b=t[h].cnt,d=a*b/(a+b);if(!(d>=i)){var y=0;n&&(y+=d*u(t[h].ac-o))>=i||(y+=d*u(t[h].rc-f))>=i||(y+=d*u(t[h].gc-s))>=i||(y+=d*u(t[h].bc-l))>=i||(i=y,r=h)}}c.err=i,c.nn=r}function b(t,e,n={}){const{format:r="rgb565",clearAlpha:i=!0,clearAlphaColor:c=0,clearAlphaThreshold:a=0,oneBitAlpha:b=!1}=n;if(!t||!t.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(t instanceof Uint8Array)&&!(t instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");const y=new Uint32Array(t.buffer);let w=!1!==n.useSqrt;const j="rgba4444"===r,m=function(t,e){const n=new Array("rgb444"===e?4096:65536),r=t.length;if("rgba4444"===e)for(let i=0;i<r;++i){const e=t[i],r=e>>24&255,c=e>>16&255,a=e>>8&255,o=255&e,s=f(o,a,c,r);let l=s in n?n[s]:n[s]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};l.rc+=o,l.gc+=a,l.bc+=c,l.ac+=r,l.cnt++}else if("rgb444"===e)for(let i=0;i<r;++i){const e=t[i],r=e>>16&255,c=e>>8&255,a=255&e,o=s(a,c,r);let f=o in n?n[o]:n[o]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};f.rc+=a,f.gc+=c,f.bc+=r,f.cnt++}else for(let i=0;i<r;++i){const e=t[i],r=e>>16&255,c=e>>8&255,a=255&e,f=o(a,c,r);let s=f in n?n[f]:n[f]={ac:0,rc:0,gc:0,bc:0,cnt:0,nn:0,fw:0,bk:0,tm:0,mtm:0,err:0};s.rc+=a,s.gc+=c,s.bc+=r,s.cnt++}return n}(y,r),g=m.length,p=g-1,x=new Uint32Array(g+1);for(var v=0,O=0;O<m.length;++O){const t=m[O];if(null!=t){var A=1/t.cnt;j&&(t.ac*=A),t.rc*=A,t.gc*=A,t.bc*=A,m[v++]=t}}u(e)/v<.022&&(w=!1);var B,S,U;for(O=0;O<v-1;++O)m[O].fw=O+1,m[O+1].bk=O,w&&(m[O].cnt=Math.sqrt(m[O].cnt));for(w&&(m[O].cnt=Math.sqrt(m[O].cnt)),O=0;O<v;++O){h(m,O,!1);var k=m[O].err;for(S=++x[0];S>1&&!(m[B=x[U=S>>1]].err<=k);S=U)x[S]=B;x[S]=O}var M=v-e;for(O=0;O<M;){for(var E;;){var F=x[1];if((E=m[F]).tm>=E.mtm&&m[E.nn].mtm<=E.tm)break;E.mtm==p?F=x[1]=x[x[0]--]:(h(m,F,!1),E.tm=O);k=m[F].err;for(S=1;(U=S+S)<=x[0]&&(U<x[0]&&m[x[U]].err>m[x[U+1]].err&&U++,!(k<=m[B=x[U]].err));S=U)x[S]=B;x[S]=F}var _=m[E.nn],q=E.cnt,D=_.cnt;A=1/(q+D);j&&(E.ac=A*(q*E.ac+D*_.ac)),E.rc=A*(q*E.rc+D*_.rc),E.gc=A*(q*E.gc+D*_.gc),E.bc=A*(q*E.bc+D*_.bc),E.cnt+=_.cnt,E.mtm=++O,m[_.bk].fw=_.fw,m[_.fw].bk=_.bk,_.mtm=p}let I=[];var N=0;for(O=0;;++N){let t=l(Math.round(m[O].rc),0,255),e=l(Math.round(m[O].gc),0,255),n=l(Math.round(m[O].bc),0,255),r=255;if(j){if(r=l(Math.round(m[O].ac),0,255),b){r=r<=("number"===typeof b?b:127)?0:255}i&&r<=a&&(t=e=n=c,r=0)}const o=j?[t,e,n,r]:[t,e,n];if(d(I,o)||I.push(o),0==(O=m[O].fw))break}return I}function d(t,e){for(let n=0;n<t.length;n++){const r=t[n];let i=r[0]===e[0]&&r[1]===e[1]&&r[2]===e[2],c=!(r.length>=4&&e.length>=4)||r[3]===e[3];if(i&&c)return!0}return!1}function y(t,e){var n,r=0;for(n=0;n<t.length;n++){const i=t[n]-e[n];r+=i*i}return r}function w(t,e){return e>1?Math.round(t/e)*e:t}function j(t,{roundRGB:e=5,roundAlpha:n=10,oneBitAlpha:r=null}={}){const i=new Uint32Array(t.buffer);for(let c=0;c<i.length;c++){const t=i[c];let a=t>>24&255,o=t>>16&255,f=t>>8&255,s=255&t;if(a=w(a,n),r){a=a<=("number"===typeof r?r:127)?0:255}s=w(s,e),f=w(f,e),o=w(o,e),i[c]=a<<24|o<<16|f<<8|s<<0}}function m(t,e,n="rgb565"){if(!t||!t.buffer)throw new Error("quantize() expected RGBA Uint8Array data");if(!(t instanceof Uint8Array)&&!(t instanceof Uint8ClampedArray))throw new Error("quantize() expected RGBA Uint8Array data");if(e.length>256)throw new Error("applyPalette() only works with 256 colors or less");const r=new Uint32Array(t.buffer),i=r.length,c="rgb444"===n?4096:65536,a=new Uint8Array(i),l=new Array(c);if("rgba4444"===n)for(let o=0;o<i;o++){const t=r[o],n=t>>24&255,i=t>>16&255,c=t>>8&255,s=255&t,u=f(s,c,i,n),h=u in l?l[u]:l[u]=g(s,c,i,n,e);a[o]=h}else{const t="rgb444"===n?s:o;for(let n=0;n<i;n++){const i=r[n],c=i>>16&255,o=i>>8&255,f=255&i,s=t(f,o,c),u=s in l?l[s]:l[s]=p(f,o,c,e);a[n]=u}}return a}function g(t,e,n,r,i){let c=0,a=1e100;for(let o=0;o<i.length;o++){const f=i[o];let s=v(f[3]-r);if(s>a)continue;if(s+=v(f[0]-t),s>a)continue;if(s+=v(f[1]-e),s>a)continue;s+=v(f[2]-n),s>a||(a=s,c=o)}return c}function p(t,e,n,r){let i=0,c=1e100;for(let a=0;a<r.length;a++){const o=r[a];let f=v(o[0]-t);if(f>c)continue;if(f+=v(o[1]-e),f>c)continue;f+=v(o[2]-n),f>c||(c=f,i=a)}return i}function x(t,e,n=5){if(!t.length||!e.length)return;const r=t.map((t=>t.slice(0,3))),i=n*n,c=t[0].length;for(let a=0;a<e.length;a++){let n=e[a];n=n.length<c?[n[0],n[1],n[2],255]:n.length>c?n.slice(0,3):n.slice();const o=A(r,n.slice(0,3),y),f=o[0],s=o[1];s>0&&s<=i&&(t[f]=n)}}function v(t){return t*t}function O(t,e,n=y){let r=1/0,i=-1;for(let c=0;c<t.length;c++){const a=n(e,t[c]);a<r&&(r=a,i=c)}return i}function A(t,e,n=y){let r=1/0,i=-1;for(let c=0;c<t.length;c++){const a=n(e,t[c]);a<r&&(r=a,i=c)}return[i,r]}function B(t,e,n=y){return t[O(t,e,n)]}function S(t={}){const{initialCapacity:e=4096,auto:n=!0}=t,c=i(e),o=new Uint8Array(256),f=new Int32Array(5003),s=new Int32Array(5003);let l=!1;return{reset(){c.reset(),l=!1},finish(){c.writeByte(r)},bytes:()=>c.bytes(),bytesView:()=>c.bytesView(),get buffer(){return c.buffer},get stream(){return c},writeHeader:u,writeFrame(t,e,r,i={}){const{transparent:h=!1,transparentIndex:b=0,delay:d=0,palette:y=null,repeat:w=0,colorDepth:j=8,dispose:m=-1}=i;let g=!1;if(n?l||(g=!0,u(),l=!0):g=Boolean(i.first),e=Math.max(0,Math.floor(e)),r=Math.max(0,Math.floor(r)),g){if(!y)throw new Error("First frame must include a { palette } option");!function(t,e,n,r,i=8){const c=1,a=0,o=E(r.length)-1,f=c<<7|i-1<<4|a<<3|o,s=0,l=0;k(t,e),k(t,n),t.writeBytes([f,s,l])}(c,e,r,y,j),U(c,y),w>=0&&function(t,e){t.writeByte(33),t.writeByte(255),t.writeByte(11),M(t,"NETSCAPE2.0"),t.writeByte(3),t.writeByte(1),k(t,e),t.writeByte(0)}(c,w)}const p=Math.round(d/10);!function(t,e,n,r,i){t.writeByte(33),t.writeByte(249),t.writeByte(4),i<0&&(i=0,r=!1);var c,a;r?(c=1,a=2):(c=0,a=0);e>=0&&(a=7&e);a<<=2;const o=0;t.writeByte(0|a|o|c),k(t,n),t.writeByte(i||0),t.writeByte(0)}(c,m,p,h,b);const x=Boolean(y)&&!g;!function(t,e,n,r){if(t.writeByte(44),k(t,0),k(t,0),k(t,e),k(t,n),r){const e=0,n=0,i=E(r.length)-1;t.writeByte(128|e|n|0|i)}else t.writeByte(0)}(c,e,r,x?y:null),x&&U(c,y),function(t,e,n,r,i=8,c,o,f){a(n,r,e,i,t,c,o,f)}(c,t,e,r,j,o,f,s)}};function u(){M(c,"GIF89a")}}function U(t,e){const n=1<<E(e.length);for(let r=0;r<n;r++){let n=[0,0,0];r<e.length&&(n=e[r]),t.writeByte(n[0]),t.writeByte(n[1]),t.writeByte(n[2])}}function k(t,e){t.writeByte(255&e),t.writeByte(e>>8&255)}function M(t,e){for(var n=0;n<e.length;n++)t.writeByte(e.charCodeAt(n))}function E(t){return Math.max(Math.ceil(Math.log2(t)),1)}var F=S},Apn4:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/export/[day]",function(){return n("/2Hx")}])},GL4Q:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var r=n("nKUr"),i=n("q1tI"),c=n("e0Q9"),a=function(t){var e=t.Day,n=Object(i.useState)(0),c=n[0],a=n[1];return Object(i.useEffect)((function(){var t;function e(n){requestAnimationFrame(e),t||(t=n),a((n-t)/1e3)}return requestAnimationFrame(e),function(){return cancelAnimationFrame(e)}}),[]),Object(r.jsx)(e.Shader,{time:c})};function o(t){var e=t.Day;return Object(r.jsx)(c.Surface,{width:400,height:400,children:Object(r.jsx)(a,{Day:e},e.n)})}}},[["Apn4",0,1,2,3]]]);